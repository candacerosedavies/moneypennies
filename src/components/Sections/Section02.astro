---
import SectionLayout from "../../layouts/SectionLayout.astro";

interface Props {
  h1Text?: string;
  subtitle?: string;
  para1?: string;
  para2?: string;
}

const {
  h1Text = "Data designed for you",
  para1 = `4,000+ annual UK association and corporate events tracked
  
  Insights on the top 500 agencies in the market`,
  subtitle = `Learn past event history, future schedules, and venue status
  `,
  para2 = "",
} = Astro.props;
---

<!-- Removed heightVariant="tall" to match Section01 -->
<SectionLayout variant="color" background="bg-[#293442]" className="Section02">
  <section class="section-2" id="section-02">
    <section
      class="section02__parallax-container"
      role="region"
      aria-label="Our data gathering services explained"
    >
      <!-- Using header wrapper like in Section01 -->
      <section class="section02__text-container">
        <header>
          <h1 class="section02__heading md__font">{h1Text}</h1>
        </header>

        <p class="section02__subtitle" style="white-space: pre-line;">
          {subtitle}
        </p>
        <p class="section02__para-1 sm__font" style="white-space: pre-line;">
          {para1}
        </p>
      </section>
    </section>
  </section>

  <!----- keyboard accessibility ----->
  <a href="#section-03" class="sr-only-focusable"> Skip to next section </a>
</SectionLayout>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    // Get the text container that wraps all text
    const textContainer = document.querySelector(".section02__text-container");

    if (textContainer) {
      window.addEventListener("scroll", () => {
        const scrollPosition = window.scrollY;
        const bounceAmount = Math.sin(scrollPosition * 0.01) * 18;
        textContainer.style.transform = `translateY(${bounceAmount}px)`;
      });
    }
  });
</script>

<style lang="scss">
  // Container for all text elements to bounce together
  .section02__text-container {
    position: relative;
    // display: block;
    z-index: 10;
    // text-shadow: 3px 3px 5px rgba(0, 0, 0, 0.3);
    display: flex;
    flex-direction: column;
    gap: 10vh; // Reduced gap for mobile
    will-change: transform;
    transition: transform 0.1s ease-out;
    /* Add flex grow to make container take available space */
    flex-grow: 1;
    justify-content: center; // Center vertically

    @include for-size(tablet, up) {
      padding-bottom: 50vh;
    }
  }
  .section-2 {
    // background-color: #1f2734;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    text-align: center;
    width: 100vw;
    font-weight: 200;
    overflow: hidden;
  }

  .section02__parallax-container {
    min-height: 100vh;
    // background-image: url("/images/hotel/pexels-cottonbro-6474587.jpg");
    // background-color: #435875;
    background-size: cover;
    background-position: center;
    display: flex;
    flex-direction: column;
    position: relative;
    /* Match Section01's padding */

    /* Match exactly Section01's responsive behavior */
    @include for-size(tablet, up) {
      min-height: 150vh;
      background-attachment: fixed;
      // padding: 6rem 2rem;
    }
  }

  // .section02__overlay {
  //   position: absolute;
  //   inset: 0;
  //   background-color: rgba(0, 0, 0, 0.4);
  // }

  /* Match Section01's heading style more closely */
  .section02__heading {
    position: relative;
    z-index: 10;
    // display: block;
    margin: 0 auto;

    text-align: center;
    color: white;
    max-width: 80%;
    // text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);

    @include for-size(tablet, up) {
      max-width: 95%;
    }
  }

  /* Match Section01's subtitle structure more closely */
  .section02__subtitle {
    position: relative;
    z-index: 10;
    display: block; /* Changed from flex */
    text-align: center;
    font-size: clamp(1rem, 5vw, 1.5rem);
    margin: 0 auto; /* Use margin auto like Section01 */
    max-width: 80%; /* Match Section01 width restriction */
    color: white;
    // text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.5);
    /* Removed align-self and other flex properties */
  }

  .section02__para-1 {
    position: relative;
    z-index: 10;

    color: white;
    text-align: center; /* Match Section01 text alignment */
    margin: 0 auto; /* Use margin auto like Section01 */
    max-width: 80%; /* Match Section01 width restriction */
    line-height: 5vh;
  }

  //----- keyboard accessibility -----
  .sr-only-focusable {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;

    &:focus {
      position: static;
      width: auto;
      height: auto;
      padding: 0.5rem;
      margin: 0;
      overflow: visible;
      clip: auto;
      white-space: normal;
      background: white;
      color: black;
      border: 2px solid black;
    }
  }
</style>
