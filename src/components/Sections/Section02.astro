---
import SectionLayout from "../../layouts/SectionLayout.astro";

interface Props {
  h1Text?: string;
  subtitle?: string;
  para1?: string;
  para2?: string;
}

const {
  h1Text = "Data designed for you",
  para1 = `4,000+ annual UK association and corporate events tracked
  
  Insights on the top 500 agencies in the market`,
  subtitle = `Learn past event history, future schedules, and venue status
  `,
  para2 = "",
} = Astro.props;
---

<!-- Removed heightVariant="tall" to match Section01 -->
<SectionLayout variant="color" background="bg-[#293442]" className="Section02">
  <section class="section-2" id="section-02">
    <section
      class="section02__parallax-container"
      role="region"
      aria-label="Our data gathering services explained"
    >
      <section
        class="section02--container__text flex-col items-center justify-center"
      >
        <header>
          <h1 class="section02__heading lg__font" data-outline={h1Text}>
            {h1Text}
          </h1>
        </header>

        <p class="section02__subtitle sm__font" style="white-space: pre-line;">
          {subtitle}
        </p>
        <p class="section02__para-1 sm__font" style="white-space: pre-line;">
          {para1}
        </p>
      </section>
    </section>
  </section>

  <!----- keyboard accessibility ----->
  <a href="#section-03" class="sr-only-focusable"> Skip to next section </a>
</SectionLayout>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    // Get the text container that wraps all text
    const textContainer = document.querySelector(
      ".section02__text-container",
    ) as HTMLElement;

    if (textContainer) {
      window.addEventListener("scroll", () => {
        const scrollPosition = window.scrollY;
        const bounceAmount = Math.sin(scrollPosition * 0.01) * 18;
        textContainer.style.transform = `translateY(${bounceAmount}px)`;
      });
    }
  });
</script>

<style lang="scss">
  .section02--container__text {
    position: relative;
    z-index: 10;
    gap: 10vh; // Reduced gap for mobile
    will-change: transform;
    transition: transform 0.1s ease-out;
    flex-grow: 1;

    @include for-size(tablet, up) {
      padding-bottom: 50vh;
    }
  }

  .section02__heading {
    text-transform: uppercase;
    font-weight: 900;
    position: static;
    padding: 0;

    @include for-size(tablet, up) {
      max-width: 95%;
    }
  }

  /* Match Section01's subtitle structure more closely */
  .section02__subtitle {
    position: relative;
    z-index: 10;

    margin: 0 auto; /* Use margin auto like Section01 */
    max-width: 80%; /* Match Section01 width restriction */
    color: white;
    // text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.5);
    // display: block; /* Changed from flex */
  }

  .section02__para-1 {
    position: relative;
    z-index: 10;

    color: white;
    text-align: center; /* Match Section01 text alignment */
    margin: 0 auto; /* Use margin auto like Section01 */
    max-width: 80%; /* Match Section01 width restriction */
    line-height: 5vh;
  }

  //----- keyboard accessibility -----
  .sr-only-focusable {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;

    &:focus {
      position: static;
      width: auto;
      height: auto;
      padding: 0.5rem;
      margin: 0;
      overflow: visible;
      clip: auto;
      white-space: normal;
      background: white;
      color: black;
      border: 2px solid black;
    }
  }
</style>
