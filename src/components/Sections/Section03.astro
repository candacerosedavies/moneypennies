---
import SectionLayout from "../../layouts/SectionLayout.astro";

interface Props {
    h1Text?: string;
    subtitle?: string;
    para?: string;
    h2Text?: string;
    para2?: string;
    para3?: string;
}

const {
    h1Text = "Make data driven decisions",
    para2 = `Real-time bookings data curated to your business needs 
  
  Insights at a glance with a personalised analysis report 
  
  Feel the impact our data can have on your revenue risk free
  `,
} = Astro.props;
---

<SectionLayout
    variant="color"
    allowOverflow={true}
    textWidth="standard"
    hasParallax={true}
    parallaxSpeed={0.2}
    className="Section03"
>
    <section class="section03__section-3" id="section-03">
        <section
            class="section03__parallax-container"
            role="region"
            aria-label="What's in it for you"
        >
            <section class="section03__overlay"></section>
            <header
                class="section03__text-container flex-col items-center justify-center"
            >
                <h1 class="section03__heading lg__font">
                    {h1Text}
                </h1>
                <p
                    class="section03__para2-wrapper sm__font"
                    style="white-space: pre-line;"
                >
                    {para2}
                </p>
                <a href="/contact/">
                    <nav class="section03__button-container">
                        <button
                            class="button--animated"
                            onclick="window.location.href='/contact/'"
                        >
                            <span class="button__text">start connecting</span>
                        </button>
                    </nav>
                </a>
            </header>
        </section>
    </section>
</SectionLayout>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        // Get the text container that wraps all text
        const textContainer = document.querySelector(
            ".section03__text-container",
        ) as HTMLElement;

        if (textContainer) {
            window.addEventListener("scroll", () => {
                const scrollPosition = window.scrollY;
                const bounceAmount = Math.sin(scrollPosition * 0.01) * 18;
                textContainer.style.transform = `translateY(${bounceAmount}px)`;
            });
        }
    });
</script>

<style lang="scss">
    .section03__section-3 {
        background-color: #344257;
        display: flex;
        flex-direction: column;
        min-height: 100vh;
        width: 100%;
        margin: 0;
        padding: 0;
    }

    .section03__text-container {
        position: relative;
        z-index: 10;
        gap: 10vh; // Reduced gap for mobile
        will-change: transform;
        transition: transform 0.1s ease-out;
        flex-grow: 1;
        // justify-content: center; // Center vertically

        @include for-size(tablet, up) {
            gap: 10vh;
            padding-bottom: 40%;
            max-width: 95%;
        }
    }

    .section03__parallax-container {
        min-height: 100vh;
        background-image: url("/images/connect/pexels-didsss-2127522.jpg");
        background-size: cover;
        background-position: right 35% bottom 40%;
        display: flex;
        flex-grow: 1;
        flex-direction: column;
        position: relative;

        //background overlay
        &::before {
            content: "";
            position: absolute;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.4);
            pointer-events: none;
        }

        @include for-size(tablet, up) {
            background-attachment: scroll;
        }
    }

    .section03__heading {
        position: relative;
        z-index: 10;
        margin: 0 auto;
        // text-align: center;
        color: white;
        max-width: 80%;

        @include for-size(tablet, up) {
            max-width: 95%;
        }
    }

    .section03__para2-wrapper {
        position: static; //ensures text is above the overlay
        z-index: 10;
        margin: auto;
        // text-align: center;
        max-width: 80%;
        text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.2);
        color: white;

        @include for-size(desktop, up) {
            min-width: 20rem;
        }
    }

    .section03__button {
        position: static; //ensures text is above the overlay
        z-index: 10;
        text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.2);
        color: white;
        border-color: white;
        padding: 1rem 1rem;
    }

    .section03__button-container {
        display: flex;
        // justify-content: center;
        // padding-top: 20vh;
    }

    .section03__overlay {
        position: absolute;
        inset: 0;
        background-color: rgba(0, 0, 0, 0.4);
        // backdrop-filter: brightness(0.8); //softens background image ( don't need it here)
    }
</style>
